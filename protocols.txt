client to server:

{
  type:        NEW_USER,
  priority:    int,

  username:    String,
  password:    String,
  description: String
}

{
  type:        LOGIN,
  priority:    int,

  username:    String,
  password:    String
}

{
  type:        CHANGE_PASSWORD,
  priority:    int,

  userId:      String,
  token:       Token,

  originalPassword: String,
  newPassword:      String
}

{
  type:          CHANGE_PROFILE,
  priority:      int,

  userId:        String,
  token:         Token,

  fieldToChange: ProfileField
  newValue:      String
}

{
  type:          UPDATE_STATUS,
  priority:      int,

  userId:        String,
  token:         Token,

  status:        UserStatus  
}

{
  type:        CHANGE_CHANNEL,
  priority:    int,

  userId:      String,
  token:       Token,

  channelId:   String,
  changeField: ChannelField
  newValue:    String
}

{
  type:        CREATE_CHANNEL,
  priority:    int,

  userId:      String,
  token:       Token,

  participants:       LinkedHashSet<UserMetadata> 
}

{
  type:              ADD_PARTICIPANT,
  priority:          int,

  userId:            String,
  token:             Token,

  channelId:         String,
  participantId:     String
}

{
  type:              REMOVE_PARTICIPANT,
  priority:          int,

  userId:            String,
  token:             Token,

  channelId:         String,
  participantId:     String //user id
}

{
  type:              BLACKLIST_USER,
  priority:          int,

  userId:            String,
  token:             Token,

  channelId:         String,
  userId:     String //user id
}

{
  type:              LEAVE_CHANNEL,
  priority:          int,

  userId:            String,
  token:             Token,

  channelId:         String,
}

{
  type:              TRANSFER_OWNERSHIP,
  priority:          int,

  userId:            String,
  token:             Token,

  channelId:         String,
  recipientId:       String //user id
}



{
  type:       MESSAGE_TO_SERVER,
  priority:   int,

  userId:     String,
  token:      Token,

  channelId:  String,
  content:    String,
  attachment: null / byte[]
}

{
  type:       REMOVE_MESSAGE,
  priority:   int,

  userId:     String,
  token:      Token,

  channelId:  String,
  messageId:  String,
}

{
  type:       EDIT_MESSAGE,
  priority:   int,

  userId:     String,
  token:      Token,

  channelId:  String,
  messageId:  String,
  newContent: String,
}

{
  type:       REQUEST_MESSAGES,
  priority:   int,

  userId:     String,
  token:      Token,

  channelId:  String,
  before:     Timestamp, //earliest timestamp in cache
  quantity:   int
}

{
  type:       FRIEND_REQUEST,
  priority:   int,

  userId:     String,
  token:      Token,

  recipientName:  String,
  requestMessage: String 
}

{
  type:           BLOCK_USER,
  priority:       int,

  userId:         String,
  token:          Token,

  blockUsername:  String,
}

{
  type:       FRIEND_REQUEST_RESPONSE,
  priority:   int,

  userId:     String,
  token:      Token,

  recipientId:  String,
  accepted:     boolean
}

{
  type: REQUEST_ATTACHMENT,
  priority: priority,

  userId: String,
  token: Token,

  fileId: String
}


server to client:

{
  type:     CLIENT_REQUEST_STATUS,
  priority: priority,

  error:  null / String (errorMsg)
}

{
  type:     CLIENT_INFO,
  priority: priority,

  userId:   String,
  token:    Token,
  status:   UserStatus,
  friends:  LinkedHashSet<userMetadata> (userId),
  incoming_friend_requests: ArrayList<userMetadata> (userId),
  outgoing_friend_requests: ArrayList<userMetadata> (userId),
  channels: LinkedHashSet<channelMetadata> (channelId)
}

{
  type:        CLIENT_FRIENDS_UPDATE,
  priority:    int,

  friends:     LinkedHashSet<userMetadata> (userId),
  incoming_friend_requests: ConcurrentHashMap<UserMetadata, String> (userId),
  outgoing_friend_requests: ConcurrentHashMap<UserMetadata, String> (userId),
}

{
  type:        CLIENT_CHANNELS_UPDATE,
  priority:    int,

  channels:    LinkedHashSet<channelMetadata> (channelId),
}

{
  type: MESSAGES_TO_CLIENT,
  priority: priority,

  channelId: channelId,
  content: Message[]
}

{
  type: MESSAGE_UPDATE_TO_CLIENT,
  priority:   int,

  channelId:  String,
  message:    Message,

  updateType: NEW/EDIT/REMOVE
}

{
  type:      ATTACHMENT_TO_CLIENT,
  priority:  priority,

  filename:  String,
  content:   byte[]
}

Data:
user = {
  userId:      String,
  username:    String,
  password:    String,
  description: String,
  status:   UserStatus (active/idle/invisible/dnd),

  friends:  ArrayList<userMetadata>, //user id
  incoming_friend_requests: ArrayList<userMetadata>, //user id
  outgoing_friend_requests: ConcurrentHashMap<userMetadata, FriendRequestStatus>,
  blocked:  ArrayList<userMetadata>, //user id
  
  channels: ArrayList<channelMetadata>, //channel id
}

privateChannel = {
  channelId: channelId,
  channelName: channelName,
  participants: [userId]
}

groupChannel = {
  channelId: channelId,
  channelName: channelName,
  participants: [userId],
  blacklist: [userId],
  admin: userId
}

message = {
  content:        String,
  senderId:       String (userId),
  channelId:      String
  created:        Timestamp,
  edited:         Timestamp,
  attachmentId:   null/String,
  attachmentName: null/String
}